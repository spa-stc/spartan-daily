---
import Layout from "../layouts/Layout.astro";
import Showcase from "../components/Showcase.astro";
import Card from "../components/Card.astro";
import Announcements from "../components/Announcements.astro";
// import QRCode from "qrcode";
import XPeriod from "../components/today/XPeriod.astro";
import Lunch from "../components/today/Lunch.astro";
import Schedule from "../components/today/Schedule.astro";
import HouseCup from "../components/housecup/HouseCup.astro";
import QRCode from "qrcode";

// no perms to fetch this right now, so... minimal POC
const newsletter = await QRCode.toDataURL(
  "https://docs.google.com/document/d/1OsR6CF628j_h-wipe8DoZCssiBl5K_N_sJ7NsmrzYYQ/edit",
  {
    type: 'image/webp',
    margin: 0,
  }
)
---

<Layout title="Spartan Daily">
  <main class="p6 ma" style="max-width: 140ch;">
    <div class="grid grid-cols-6 gap-3">
      <div class="row-span-3 col-span-2">
        <Announcements />
      </div>
      <div class="col-span-3">
        <Showcase />
      </div>
      <ul class="space-y-4">
        <Lunch />
        <Card title="Student Newsletter">
          <img src={newsletter} />
        </Card>  
      </ul>
      <Schedule />
      <XPeriod />
      <div class="col-span-2">
        <HouseCup />
      </div>
    </div>
  </main>
</Layout>
